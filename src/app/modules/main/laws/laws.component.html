<!--<div class="row row-search">
    <div class="col-md-12">
        <mat-toolbar class="topbar relative" >
            <div class="w-100 fix-width-for-horizontal">
        <button mat-icon-button class="srh-btn" (click)="showSearch = !showSearch">
            <mat-icon>search</mat-icon>
        </button>
        <form class="app-search" [ngClass]="{'show-search': showSearch}">
            <input type="text" class="form-control" placeholder="Escribe el texto a buscar...">
            <a class="cl-srh-btn" (click)="showSearch = !showSearch">
                <i class="ti-close"></i>
            </a>
        </form>
        </div>
        </mat-toolbar>
        <nb-card>
            <nb-card-header>Busqueda de articulos</nb-card-header>
          <nb-card-body>
                <nb-search type="rotate-layout" tag="rotate-layout" hint="Presiona enter para iniciar la busqueda"
                    placeholder="Busqueda..."></nb-search>
                <span *ngIf="searchCard.where">Resultados de busqueda: <b>{{searchCard.where}}</b> <nb-icon icon="close-outline" (click)="clearSearch()"></nb-icon></span>
            </nb-card-body>
          </nb-card>
    </div>
</div>-->

<app-user-icon></app-user-icon>

<div class="accordions-container row"style="margin-top:15px" >
    <div class="accordion-container" style="overflow: auto; max-height: 90vh;" [ngClass]="{'col-md-8 col-lg-6 col-xxxl-6':article && !articleRel, 'col-md-12 col-lg-12 col-xxxl-12':!article && !articleRel, 'col-md-4 col-lg-4 col-xxxl-4':article && articleRel}">
        <div class="example-action-buttons">
            <!--<button mat-button (click)="accordion.openAll()">Abrir Todo</button>
            <button mat-button (click)="accordion.closeAll()">Cerrar Todo</button>-->
        </div>
        <!--<pre><code>{{data | json}}</code></pre>-->
        <mat-accordion class="example-headers-align" multi style="position: sticky; top:10vh">
            <mat-expansion-panel *ngFor="let cla of data.clasifications" ><!--style="overflow-y: auto; max-height: 80vh;"-->
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>menu_book</mat-icon> &nbsp; {{cla.nombre}}
                    </mat-panel-title>
                    <!--<mat-panel-description>Type your name and age<mat-icon>account_circle</mat-icon></mat-panel-description>-->
                </mat-expansion-panel-header>
                <mat-accordion class="example-headers-align" multi>
                    <mat-expansion-panel *ngFor="let doc of cla.documents">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <div class="row mt-2">
                                    <div class="col-12"><mat-icon>book</mat-icon> &nbsp; {{doc.titulo}}</div>
                                    <!--<div class="col-6 col-sm-5 col-md-4 col-lg-3 text-center"><b>Abrev.</b> {{doc.abreviatura || '--'}}</div>
                                    <div class="col col-sm-5 col-md-4 col-lg-3 text-center"><b>Año</b> {{doc.ayo || '0000'}}</div>-->
                                </div>
                            </mat-panel-title>
                            <!--<mat-panel-description *ngIf="!articleRel">
                                <table>
                                    <tr><th>Articulos</th><th>Abreviatura</th><th>Editorial</th><th>Año</th></tr>
                                    <tr><td>{{doc.num_articulos || 0}}</td><td>{{doc.abreviatura || '--'}}</td><td>{{doc.editorial || '--'}}</td><td>{{doc.ayo || '0000'}}</td></tr>
                                </table>
                            </mat-panel-description>-->
                        </mat-expansion-panel-header>
                        <div *ngIf="doc.titles">
                            <!--<mat-list role="list" >
                                    <mat-list-item role="listitem" *ngFor="let tit of doc.titles" (click)="articleClick(art)">
                                        TITULO {{tit.nombre || '--'}}
                                    </mat-list-item>
                                </mat-list>-->
                            <mat-accordion class="example-headers-align" multi>
                                <mat-expansion-panel *ngFor="let tit of doc.titles">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>TITULO {{tit.nombre}}</mat-panel-title>
                                        <mat-panel-description *ngIf="tit.articles">Artículos del {{tit.articles[0].articulo}} al {{tit.articles[tit.articles.length - 1].articulo}}</mat-panel-description>
                                    </mat-expansion-panel-header>
                                    <!--<div *ngIf="!tit.chapters">-->
                                    <div *ngIf="tit.articles">
                                        <mat-accordion>
                                            <mat-expansion-panel *ngFor="let art of tit.articles">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title (click)="articleClick(art)">
                                                        <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || '--'}}
                                                    </mat-panel-title>
                                                </mat-expansion-panel-header>
                                                <div *ngIf="art.parrafos">
                                                    <mat-list role="list">
                                                        <mat-list-item role="listitem" [ngClass]="{'hide':par.tipo == 1}" *ngFor="let par of art.parrafos" (click)="articleClick(art,par)">
                                                            Parr. {{par.numero || ''}} {{par.nombre || ''}}
                                                        </mat-list-item>
                                                    </mat-list>
                                                </div>
                                            </mat-expansion-panel>
                                        </mat-accordion>
                                    </div>
                                    <div *ngIf="tit.chapters">
                                        <mat-accordion class="example-headers-align" multi>
                                            <mat-expansion-panel *ngFor="let cha of tit.chapters">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>CAPITULO {{cha.nombre}}</mat-panel-title>
                                                    <mat-panel-description *ngIf="cha.articles">Artículos del {{cha.articles[0].articulo}} al {{cha.articles[cha.articles.length - 1].articulo}}</mat-panel-description>
                                                </mat-expansion-panel-header>
                                                <div *ngIf="cha.articles">
                                                    <mat-accordion>
                                                        <mat-expansion-panel *ngFor="let art of cha.articles">
                                                            <mat-expansion-panel-header>
                                                                <mat-panel-title (click)="articleClick(art)">
                                                                    <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || '--'}}
                                                                </mat-panel-title>
                                                            </mat-expansion-panel-header>
                                                            <div *ngIf="art.parrafos" class="parrafos">
                                                                <mat-list role="list" >
                                                                    <mat-list-item role="listitem" [ngClass]="{'hide':par.tipo == 1}" *ngFor="let par of art.parrafos" (click)="articleClick(art,par)">
                                                                        <span *ngIf="par.tipo == 0"><mat-icon>bookmark</mat-icon> &nbsp; Párr. {{par.numero || ''}} {{par.nombre || '--'}}</span>
                                                                    </mat-list-item>
                                                                </mat-list>
                                                            </div>
                                                        </mat-expansion-panel>
                                                    </mat-accordion>
                                                </div>
                                            </mat-expansion-panel>
                                        </mat-accordion>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </div>
                        <div *ngIf="doc.chapters">
                            <mat-accordion class="example-headers-align" multi>
                                <mat-expansion-panel *ngFor="let cha of doc.chapters">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>CAPITULO {{cha.nombre}}</mat-panel-title>
                                        <mat-panel-description *ngIf="cha.articles">Artículos del {{cha.articles[0].articulo}} al {{cha.articles[cha.articles.length - 1].articulo}}</mat-panel-description>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="cha.articles">
                                        <mat-list role="list" >
                                            <mat-list-item role="listitem" *ngFor="let art of cha.articles" (click)="articleClick(art)">
                                                <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || '--'}}
                                            </mat-list-item>
                                        </mat-list>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
    <div *ngIf="article" class="accordion-container" [ngClass]="{'col-md-4 col-lg-6 col-xxxl-6':article && !articleRel, 'col-md-4 col-lg-4 col-xxxl-4':article && articleRel}">
        <div class="example-action-buttons">
          <!--<button mat-button (click)="accordion.openAll()">Mostrar Todo</button>
          <button mat-button (click)="accordion.closeAll()">Esconder Todo</button>-->
        </div>
        <mat-accordion class="example-headers-align" style="position: sticky; top:10vh">
            <mat-expansion-panel [expanded]="true" style="overflow: auto; max-height: 90vh;">
                <mat-expansion-panel-header>
                    <mat-panel-title class="flex-grow-1">
                        <mat-icon>auto_stories</mat-icon> &nbsp; Articulo {{article.articulo}} {{article.indicador || ''}}.-
                    </mat-panel-title>
                    <mat-panel-description *ngIf="!articleRel">{{article.nombre || ''}}</mat-panel-description>
                </mat-expansion-panel-header>
                <h5 *ngIf="articleRel">{{article.nombre || ''}}</h5>
                <div *ngFor="let par of article.parrafos" >
                    <label [id]="'par-'+par.id" for="" class="nombre_parrafo"><span *ngIf="par.tipo == 0 && par.numero">Párr. {{par.numero || ''}} -</span> {{par.nombre || ''}}</label>
                    <!--<p [innerHtml]="par.contenido || ''"></p>-->
                    <div *ngIf="par.tipo == 1" class="fraccion">
                        <b>{{par.indicador}}</b>.&nbsp;<span [innerHtml]="par.contenido || ''"></span>
                    </div>
                    <p *ngIf="par.tipo == 0" [ngClass]="{'fraccion':par.tipo == 1}" [innerHtml]="par.contenido || ''" style="text-align: justify;"></p>
                    <!--<mat-button-toggle-group *ngIf="par.articulos_relacionados">
                        <mat-button-toggle value="bold" *ngFor="let ar of par.articulos_relacionados" (click)="addArticle(ar)">
                        {{ar.abreviatura || ''}}  Art.- {{ar.articulo || ''}} {{ar.indicador || ''}} - {{ar.nombre}}
                        </mat-button-toggle>
                    </mat-button-toggle-group>-->
                    <a [routerLink]="" (click)="addArticle(ar)" *ngFor="let ar of par.articulos_relacionados" class="ancla">{{ar.abreviatura || ''}}  Art.- {{ar.articulo || ''}} {{ar.indicador || ''}} - {{ar.nombre}}</a>
                </div>
                <!--<mat-accordion class="example-headers-align">
                    <mat-expansion-panel [expanded]="true" *ngFor="let arts of articles">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <mat-icon>auto_stories</mat-icon> &nbsp; Articulo {{arts.articulo}} {{arts.indicador || ''}}.-
                            </mat-panel-title>
                            <mat-panel-description>{{arts.nombre || ''}}</mat-panel-description>
                        </mat-expansion-panel-header>
                        <p *ngFor="let par of arts.parrafos">{{par.contenido || ''}}</p>
                        <mat-button-toggle-group *ngIf="arts.articulos_relacionados" name="fontStyle" aria-label="Font Style">
                            <mat-button-toggle value="bold" *ngFor="let ar of arts.articulos_relacionados" (click)="addArticle(ar)">
                                Art.- {{ar.articulo || ''}}
                            </mat-button-toggle>
                        </mat-button-toggle-group>
                    </mat-expansion-panel>
                </mat-accordion>-->
            </mat-expansion-panel>
        </mat-accordion>
    </div>
    <div *ngIf="articleRel" class="accordion-container col-md-4 col-lg-4 col-xxxl-4">
        <mat-accordion class="example-headers-align" style="position: sticky; top:10vh">
            <mat-expansion-panel [expanded]="true" style="overflow: auto; max-height: 90vh;">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>auto_stories</mat-icon> &nbsp; Articulo {{articleRel.articulo}} {{articleRel.indicador || ''}}.-
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <h5 *ngIf="articleRel">{{articleRel.nombre || ''}}</h5>
                <div *ngFor="let par of articleRel.parrafos" >
                    <label [id]="'par-'+par.id" for="" class="nombre_parrafo"><span *ngIf="par.tipo == 0 && par.numero">Párr. {{par.numero || ''}} -</span> {{par.nombre || ''}}</label>
                    <div *ngIf="par.tipo == 1" class="fraccion">
                        <b>{{par.indicador}}</b>.&nbsp;<span [innerHtml]="par.contenido || ''"></span>
                    </div>
                    <p *ngIf="par.tipo == 0" [ngClass]="{'fraccion':par.tipo == 1}" [innerHtml]="par.contenido || ''" style="text-align: justify;"></p>
                    <a [routerLink]="" (click)="addArticle(ar)" *ngFor="let ar of par.articulos_relacionados" class="ancla">{{ar.abreviatura || ''}}  Art.- {{ar.articulo || ''}} {{ar.indicador || ''}} - {{ar.nombre}}</a>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
</div>
