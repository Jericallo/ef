<app-user-icon></app-user-icon>
<div class="row">
  <div class="col-5">
    <mat-card>
      <mat-card-content>
        <!--<mat-card-title>Tree with flat nodes</mat-card-title>-->
        <cdk-tree [dataSource]="dataSource" [treeControl]="treeControl">
          <cdk-tree-node *cdkTreeNodeDef="let node" cdkTreeNodePadding [cdkTreeNodeToggleRecursive]="true"
            [style.display]="shouldRender(node) ? 'flex' : 'none'" class="example-tree-node">
            <button mat-icon-button disabled></button>
            <button mat-button (click)="showContent(node.name)" *ngIf="node.level==1;else onlyName">{{ node.name }}</button>
            <ng-template #onlyName>{{node.name}}</ng-template>
          </cdk-tree-node>
          <cdk-tree-node *cdkTreeNodeDef="let node; when: hasChild" cdkTreeNodePadding [cdkTreeNodeToggleRecursive]="true"
            [style.display]="shouldRender(node) ? 'flex' : 'none'" class="example-tree-node">
            <button mat-icon-button cdkTreeNodeToggle [attr.aria-label]="'toggle ' + node.filename"
              (click)="node.isExpanded = !node.isExpanded" [style.visibility]="node.expandable ? 'visible' : 'hidden'">
              <mat-icon class="mat-icon-rtl-mirror">
                {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
              </mat-icon>
            </button>
            {{ node.name }}
          </cdk-tree-node>
        </cdk-tree>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="col-7">
    <mat-card style="position: sticky; top:5.5vh">
      <mat-card-content>
        <div class="accordion-container" style="overflow: auto; max-height: 85vh;" [ngClass]="{'col-md-8 col-lg-6 col-xxxl-6':article && !articleRel, 'col-md-12 col-lg-12 col-xxxl-12':!article && !articleRel, 'col-md-4 col-lg-4 col-xxxl-4':article && articleRel}">
          <div class="example-action-buttons">
              <!--<button mat-button (click)="accordion.openAll()">Abrir Todo</button>
              <button mat-button (click)="accordion.closeAll()">Cerrar Todo</button>-->
          </div>
          <!--<pre><code>{{data | json}}</code></pre>-->
          <mat-accordion class="example-headers-align" multi style="position: sticky; top:10vh">
              <mat-expansion-panel *ngFor="let cla of clasificaciones" ><!--style="overflow-y: auto; max-height: 80vh;"-->
                  <mat-expansion-panel-header>
                      <mat-panel-title>
                          <mat-icon>menu_book</mat-icon> &nbsp; {{cla.nombre}}
                      </mat-panel-title>
                      <!--<mat-panel-description>Type your name and age<mat-icon>account_circle</mat-icon></mat-panel-description>-->
                  </mat-expansion-panel-header>
                  <mat-accordion class="example-headers-align" multi>
                      <mat-expansion-panel *ngFor="let doc of cla.documentos">
                          <mat-expansion-panel-header>
                              <mat-panel-title>
                                  <div class="row mt-2">
                                      <div class="col-12"><mat-icon>book</mat-icon> &nbsp; {{doc.titulo}}</div>
                                      <!--<div class="col-6 col-sm-5 col-md-4 col-lg-3 text-center"><b>Abrev.</b> {{doc.abreviatura || '--'}}</div>
                                      <div class="col col-sm-5 col-md-4 col-lg-3 text-center"><b>Año</b> {{doc.ayo || '0000'}}</div>-->
                                  </div>
                              </mat-panel-title>
                              <!--<mat-panel-description *ngIf="!articleRel">
                                  <table>
                                      <tr><th>Articulos</th><th>Abreviatura</th><th>Editorial</th><th>Año</th></tr>
                                      <tr><td>{{doc.num_articulos || 0}}</td><td>{{doc.abreviatura || '--'}}</td><td>{{doc.editorial || '--'}}</td><td>{{doc.ayo || '0000'}}</td></tr>
                                  </table>
                              </mat-panel-description>-->
                          </mat-expansion-panel-header>
                        <div *ngIf="doc.titulos">
                              <!--<mat-list role="list" >
                                      <mat-list-item role="listitem" *ngFor="let tit of doc.titles" (click)="articleClick(art)">
                                          TITULO {{tit.nombre || '--'}}
                                      </mat-list-item>
                                  </mat-list>-->
                            <mat-accordion class="example-headers-align" multi>
                                <mat-expansion-panel *ngFor="let tit of doc.titulos">
                                      <mat-expansion-panel-header>
                                          <mat-panel-title>TITULO {{tit.nombre}}</mat-panel-title>
                                          <mat-panel-description *ngIf="tit.articulos">Artículos del {{tit.articulos[0].articulo}} al {{tit.articulos[tit.articulos.length - 1].articulo}}</mat-panel-description>
                                      </mat-expansion-panel-header>
                                      <!--<div *ngIf="!tit.chapters">-->
                                      <div *ngIf="tit.articulos">
                                          <mat-accordion>
                                              <mat-expansion-panel *ngFor="let art of tit.articulos">
                                                  <mat-expansion-panel-header>
                                                      <mat-panel-title (click)="articleClick(art)">
                                                          <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || '--'}}
                                                      </mat-panel-title>
                                                  </mat-expansion-panel-header>
                                                  <div *ngIf="art.parrafos">
                                                      <mat-list role="list">
                                                          <mat-list-item role="listitem" [ngClass]="{'hide':par.tipo == 1}" *ngFor="let par of art.parrafos" (click)="articleClick(art,par)">
                                                            Parr. {{par.numero || ''}}&nbsp;<span [innerHtml]="par.nombre || ''"></span><br>
                                                            <p [innerHtml]="par.contenido || ''"></p>
                                                              <!--<b>{{par.numero || ''}}</b>.&nbsp;<span [innerHtml]="par.contenido || ''"></span>-->
                                                          </mat-list-item>
                                                      </mat-list>
                                                  </div>
                                              </mat-expansion-panel>
                                          </mat-accordion>
                                      </div>
                                    <div *ngIf="tit.capitulos">
                                        <mat-accordion class="example-headers-align" multi>
                                            <mat-expansion-panel *ngFor="let cha of tit.capitulos">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>CAPITULO {{cha.nombre}}</mat-panel-title>
                                                    <mat-panel-description *ngIf="cha.articulos">Artículos del {{cha.articulos[0].articulo}} al {{cha.articulos[cha.articulos.length - 1].articulo}}</mat-panel-description>
                                                </mat-expansion-panel-header>
                                                <div *ngIf="cha.articulos">
                                                    <mat-accordion>
                                                        <mat-expansion-panel *ngFor="let art of cha.articulos">
                                                            <mat-expansion-panel-header>
                                                                <mat-panel-title (click)="articleClick(art)">
                                                                    <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || ''}}
                                                                </mat-panel-title>
                                                            </mat-expansion-panel-header>
                                                            <div *ngIf="art.parrafos" class="parrafos">
                                                                <mat-list role="list" >
                                                                    <mat-list-item role="listitem" [ngClass]="{'hide':par.tipo == 1}" *ngFor="let par of art.parrafos" (click)="articleClick(art,par)">
                                                                        <span *ngIf="par.tipo == 0">
                                                                            <mat-icon>bookmark</mat-icon> &nbsp; Párr. {{par.numero || ''}} {{par.nombre || ''}}
                                                                        </span>
                                                                        <p [innerHtml]="par.contenido"></p>
                                                                    </mat-list-item>
                                                                </mat-list>
                                                            </div>
                                                        </mat-expansion-panel>
                                                    </mat-accordion>
                                                </div>
                                            </mat-expansion-panel>
                                        </mat-accordion>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </div>
                        <div *ngIf="doc.capitulos">
                              <mat-accordion class="example-headers-align" multi>
                                  <mat-expansion-panel *ngFor="let cha of doc.capitulos">
                                      <mat-expansion-panel-header>
                                          <mat-panel-title>CAPITULO {{cha.nombre}}</mat-panel-title>
                                          <mat-panel-description *ngIf="cha.articulos">Artículos del {{cha.articulos[0].articulo}} al {{cha.articulos[cha.articulos.length - 1].articulo}}</mat-panel-description>
                                      </mat-expansion-panel-header>
                                      <div *ngIf="cha.articulos">
                                        <mat-accordion>
                                            <mat-expansion-panel *ngFor="let art of cha.articulos">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title (click)="articleClick(art)">
                                                        <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || ''}}
                                                    </mat-panel-title>
                                                </mat-expansion-panel-header>
                                                <div *ngIf="art.parrafos">
                                                    <mat-list role="list">
                                                        <mat-list-item role="listitem" [ngClass]="{'hide':par.tipo == 1}" *ngFor="let par of art.parrafos" (click)="articleClick(art,par)">
                                                            <div style="width: 100%;"> Parr. {{par.numero || ''}} <span [innerHtml]="par.nombre || ''"></span> </div>
                                                            <p [innerHtml]="par.contenido || ''"></p>
                                                        </mat-list-item>
                                                    </mat-list>
                                                </div>
                                            </mat-expansion-panel>
                                        </mat-accordion>
                                    </div>
                                      <!--<div *ngIf="cha.articulos">
                                          <mat-list role="list" >
                                              <mat-list-item role="listitem" *ngFor="let art of cha.articulos" (click)="articleClick(art)">
                                                  <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || '--'}}
                                              </mat-list-item>
                                          </mat-list>
                                      </div>-->
                                  </mat-expansion-panel>
                              </mat-accordion>
                        </div>
                        <div *ngIf="doc.secciones">
                            <mat-accordion class="example-headers-align" multi>
                                <mat-expansion-panel *ngFor="let sec of doc.secciones">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>Seccion {{sec.nombre}}</mat-panel-title>
                                        <mat-panel-description *ngIf="sec.articulos">Artículos del {{sec.articulos[0].articulo}} al {{sec.articulos[sec.articulos.length - 1].articulo}}</mat-panel-description>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="sec.articles">
                                        <mat-list role="list" >
                                            <mat-list-item role="listitem" *ngFor="let art of sec.articulos" (click)="articleClick(art)">
                                                <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || '--'}}
                                            </mat-list-item>
                                        </mat-list>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </div>
                        <div *ngIf="doc.articulos">
                            <mat-accordion>
                                <mat-expansion-panel *ngFor="let art of doc.articulos">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title (click)="articleClick(art)">
                                            <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || ''}}
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="art.parrafos">
                                        <mat-list role="list">
                                            <mat-list-item role="listitem" [ngClass]="{'hide':par.tipo == 1}" *ngFor="let par of art.parrafos" (click)="articleClick(art,par)">
                                                <div style="width: 100%;"> Parr. {{par.numero || ''}} {{par.nombre || ''}} </div>
                                                <p [innerHtml]="par.contenido || ''"></p>
                                            </mat-list-item>
                                        </mat-list>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </div>
                        <!--<div *ngIf="doc.articulos">
                            <mat-list role="list" >
                                <mat-list-item role="listitem" *ngFor="let art of doc.articulos" (click)="articleClick(art)">
                                    <mat-icon>bookmark</mat-icon> &nbsp; Artículo {{art.articulo}} {{art.indicador || ''}}.- {{art.nombre || '--'}}
                                </mat-list-item>
                            </mat-list>
                        </div>-->
                      </mat-expansion-panel>
                  </mat-accordion>
              </mat-expansion-panel>
          </mat-accordion>
      </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>