<app-user-icon></app-user-icon>

<div class="page-content" #tableContainer>

  <mat-toolbar-row style="background-color: #ffcc0c; width: 100%; position: fixed; z-index: 3; top: 30px;" >
    <div style=" margin-left: auto; margin-right: auto;">
      <button mat-icon-button mwlCalendarPreviousView class="button_month" (click)="monthPrevious()">
          <mat-icon>chevron_left</mat-icon><span>Anterior</span>
      </button>
      <span >
          {{mesMostrar}}
      </span>
      <button mat-icon-button mwlCalendarNextView class="button_month" (click)="monthNext()">
          <span>Siguiente</span><mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </mat-toolbar-row>
<!--LA FUCKING TABLA DEL DIABLO-->
  <mat-table [dataSource]="dataSource" class="mat-elevation-z8 celdas" matSort style=" margin-top: 50px; height: 70%; width: 7600px; border-top-width: 5px;" >
    
    <ng-container matColumnDef="fixedColumn" class="container" sticky>
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 1.2;">
        <div class="container" style="flex-direction: column;">
          <div class="celdas" style="height: 8.55vh; min-height: 80.37px; "></div>
          <div class="celdas" style="height: max-content; flex-direction: row; display: flex;">
            <div class="celdas" style="flex: 1;">Números</div>
            <div class="celdas" style="flex: 1;">Indicador</div>
          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 1.2;">
        <div class="container">
          <div class="celdas internas" style="flex: 1;">{{row.content.id_cumplimiento}}</div>  
          <div class="celdas internas" style="flex: 1;">
            <div class="circle" [ngStyle]="{'background-color':row.content.color}"></div>
          </div>
        </div>
      </mat-cell>

    </ng-container>

    <ng-container matColumnDef="fixedColumn2" class="container" sticky>
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 4.5;">
        <div class="container" style="flex-direction: column;">
          <div class="celdas" style="height: 4vh; min-height: 37.6px; overflow: scroll;">
            Las obligaciones se listan por <a (click)="reorderBy('id_cumplimiento')">General</a> / 
            <a (click)="reorderBy('fecha_ideal')">Fecha Ideal</a> / 
            <a (click)="getObligations(0, 'impuesto_isr')">ISR</a> / 
            <a (click)="getObligations(0, 'impuesto_iva')">IVA</a> / 
            <a (click)="getObligations(0, 'impuesto_nomina')">Nóminas</a> / 
            <a (click)="getObligations(0, 'impuesto_otro')">Otros</a> / 
          </div>
          <div style="display: flex; flex-direction: row;">
            <div style="flex: 2.8;">
              <div class="celdas" style="height: 4.55vh; min-height: 42.77px; text-align: center; padding-top:4%;"><b>Cumplimiento {{d | date:'d-MMMM-y'}}</b></div>
              <div class="celdas">Calendario:</div>
            </div>
            <div style="flex: 1.2;">
              <div class="celdas" style="height: 4.55vh; min-height: 37.6px;; ">Tipo de impuesto</div>
              <div class="celdas" style="height: max-content; flex-direction: row; display: flex;">
                <div class="celdas" style="flex: 0.5;">ISR</div>
                <div class="celdas" style="flex: 0.5;">IVA</div>
                <div class="celdas" style="flex: 1;">Nóminas</div>
                <div class="celdas" style="flex: 0.5;">Otros</div>
              </div>
            </div>
          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 4.5;">
      <div class="container">
        <div style="flex: 2.8;">
          <div class="celdas internas" style="flex: 1;">{{row.content.nombre}}</div>  
        </div>
        <div style="flex: 1.2; display: flex; flex-direction: row;">
          <div class="celdas internas" style="flex: 0.5;">
            <mat-checkbox class="example-margin" (change)="updateISR($event, row)"[checked]= "row.content.ISR == 1"></mat-checkbox>
          </div>  
          <div class="celdas internas" style="flex: 0.5;">          
            <mat-checkbox class="example-margin" (change)="updateIVA($event, row)" [checked]= "row.content.IVA == 1"></mat-checkbox>
          </div>  
          <div class="celdas internas" style="flex: 1;">
            <mat-checkbox class="example-margin" (change)="updateNOM($event, row)" [checked]= "row.content.NOMINA == 1"></mat-checkbox>
          </div>  
          <div class="celdas internas" style="flex: 0.5;">
            <mat-checkbox class="example-margin" (change)="updateOTHER($event, row)" [checked]= "row.content.OTRO == 1"></mat-checkbox>
          </div>  
        </div> 
      </div>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="fixedColumn3" class="container" sticky>
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 1.3;">
        <div class="container" style="flex-direction: column;">
          <div class="celdas" style=" min-height: 86.61px;">¿Aplica el Punto?</div>
          <div class="celdas" style="flex-direction: row; display: flex;">
            <div class="celdas" style="flex: 0.5;">Si</div>
            <div class="celdas" style="flex: 0.5;">No</div>        
            <div class="celdas" style="flex: 1;">Prioridad</div>      
          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 1.3;">
        <div class="container">
          <div class="celdas internas" style="flex: 1; align-items: center; align-content: center; text-align: center; padding-top: 10px;">
            <mat-slide-toggle [(ngModel)]="row.switch" 
            (change)="onSwitchChange(row)" 
            color="warn"   
            thumbColor="accent"
            trackColor="warn"
            [checked]="false">
            </mat-slide-toggle>
          </div>  
          <div class="celdas internas" style="flex: 1;">
            <button mat-button [matMenuTriggerFor]="menu">{{row.content.prioridad}} <mat-icon>keyboard_arrow_down</mat-icon> </button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="modPrioridad(1, row)">Alta</button>
              <button mat-menu-item (click)="modPrioridad(3, row)">Baja</button>
            </mat-menu>
          </div> 
        </div>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="fixedColumn4" class="container">
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 16;">
        <div class="container" style="flex-direction: column; min-width: 100% !important; ">
          <div class="celdas" style=" min-height: 21.83px;">Cumplimiento de obligación</div>
          <div class="celdas" style="flex-direction: row; display: flex;">
            <div style="flex: 4; flex-direction: column; display: flex;">
              <div class="celdas" style="min-height: 20.2px;">Fundamento legal</div>
              <div class="celdas" style="display: flex; flex-direction: row;">
                <div class="celdas" style="flex: 1;">Periodo ideal para iniciar el cumplimiento</div>
                <div class="celdas" style="flex: 1;">Periodo ideal para terminar el cumplimiento</div>
                <div class="celdas" style="flex: 1;">Periodo para cumplirlo con vencimiento próximo</div>
                <div class="celdas" style="flex: 1;">Periodo para cumplirlo muy urgente</div>
              </div>
            </div>
           
            <div  style="flex: 3; flex-direction: column; display: flex;">
              <div class="celdas" style="height: 3vh; min-height: 28.2px;">Fundamento legal</div>
              <div class="celdas" style="display: flex; flex-direction: row;">
                <div class="celdas" style="flex: 1; height: 53px;">Fecha máxima legal</div>
                <div class="celdas" style="flex: 1;">Art.</div>
                <div class="celdas" style="flex: 1;">Actualizado al</div>
              </div>
            </div>  

            <div class="celdas" style="flex: 1;">¿Se cumplió con la obligación?</div>        
            <div class="celdas" style="flex: 1;">Fecha en la que se cumplió</div>   
            
            <div  style="flex: 3; flex-direction: column; display: flex;">
              <div class="celdas" style="height: 3vh; min-height: 28.2px;">Alerta de lo ocurrido</div>
              <div class="celdas" style="display: flex; flex-direction: row;">
                <div class="celdas" style="flex: 1; height: 53px;">Cumplimiento completo</div>
                <div class="celdas" style="flex: 1;">Falta VoBo del supervisor</div>
                <div class="celdas" style="flex: 1;">Incumplimiento 24 hrs</div>
              </div>
            </div>  

          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 16;">
        <div class="container" style="min-width: 100%;">
          <div class="celdas internas" style="flex: 1;">
            
            <input matInput [matDatepicker]="picker" [value]="row.content.fecha_inicio_ideal | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 1, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker ></mat-datepicker> / 

            <input matInput [matDatepicker]="picker2" [value]="row.content.fecha_inicio_ideal_fin | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 2, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>

          </div>
          <div class="celdas internas" style="flex: 1;">

            <input matInput [matDatepicker]="picker3" [value]="row.content.fecha_inicio_cumplimiento  | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 3, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker3"></mat-datepicker-toggle>
            <mat-datepicker #picker3></mat-datepicker> / 

            <input matInput [matDatepicker]="picker4" [value]="row.content.fecha_inicio_cumplimiento_fin  | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 4, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker4"></mat-datepicker-toggle>
            <mat-datepicker #picker4></mat-datepicker>

          </div>
          <div class="celdas internas" style="flex: 1;">

            <input matInput [matDatepicker]="picker5" [value]="row.content.fecha_ideal  | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 5, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker5"></mat-datepicker-toggle>
            <mat-datepicker #picker5></mat-datepicker> / 

            <input matInput [matDatepicker]="picker6" [value]="row.content.fecha_ideal_fin  | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 6, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker6"></mat-datepicker-toggle>
            <mat-datepicker #picker6></mat-datepicker>

          </div>  
          <div class="celdas internas" style="flex: 1;">

            <input matInput [matDatepicker]="picker7" [value]="row.content.fecha_maxima | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 7, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker7"></mat-datepicker-toggle>
            <mat-datepicker #picker7></mat-datepicker> / 

            <input matInput [matDatepicker]="picker8" [value]="row.content.fecha_maxima_fin | date:'yyyy-MM-dd'" class="fecha_picker" (dateChange)="onDateSelected($event, 8, row.content.obligacion)">
            <mat-datepicker-toggle matIconSuffix [for]="picker8"></mat-datepicker-toggle>
            <mat-datepicker #picker8></mat-datepicker>
          </div>  
          <div class="celdas internas" style="flex: 1;">contenido</div>  
          <div class="celdas internas" style="flex: 1;">
            <button (click)="openArticleFund(row)" mat-fab color="primary" class="custom-fab">
              <mat-icon style="font-size:22px;">bookmark</mat-icon>
            </button>
            <div *ngFor="let fundamento of row.content.fundamento_legal">
              <a (click)="articleClicked(fundamento)">Artículo {{fundamento.art.articulo}} </a><br/>
            </div>
          </div>  
          <div class="celdas internas" style="flex: 1;">
            <p *ngFor="let fundamento of row.content.fundamento_legal">{{fundamento.fecha | date:'d-MMM-y'}}</p>
          </div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.se_cumplio}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.fecha_cumplio | date:'d-MMM-y'}}</div>  
          <div class="celdas internas" style="flex: 1;">contenido</div>  
          <div class="celdas internas" style="flex: 1;">contenido</div>  
          <div class="celdas internas" style="flex: 1;">contenido</div>  

        </div>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="fixedColumn5" class="container">
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 8;">
        <div class="container" style="flex-direction: column;">
          <div class="celdas" style="height: 3.75vh; min-height: 40.55px;">Envío de Documentación de Evidencia</div>
          <div class="celdas" style="flex-direction: row; display: flex; width: 100%;">
            <div class="celdas" style="flex: 2;">Documentación que debe enviarse (declara, pagos, actas, hojas de trabajo, etc)</div>
            <div class="celdas" style="flex: 1;">Fecha ideal para enviarla</div>
            <div class="celdas" style="flex: 1;">Fecha máxima para enviarla</div>
            <div class="celdas" style="flex: 1;">Fecha en la que se envió</div>
            <div class="celdas" style="flex: 1;">Recibida a tiempo</div>
            <div class="celdas" style="flex: 1;">Documentación suficiente</div>
            <div class="celdas" style="flex: 1;">Documentación insuficiente</div>
            <div class="celdas" style="flex: 1;">Notas / Chat / Bitácora</div>
          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 8;">
        <div class="container" style="flex-direction: row;">
          <div class="celdas internas" style="flex: 2;">
            <span *ngFor="let doc of row.content.documentos_faltantes">{{doc}} <br/></span>
          </div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.documentos_fecha_ideal | date}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.documentos_fecha_maxima | date}}</div>
          <div class="celdas internas" style="flex: 1;">contenido</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.documentos_en_tiempo}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.documentos_documentacion_suficiente}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.documentos_documentacion_suficiente}}</div>
          <div class="celdas internas" style="flex: 1;">
            <span *ngFor="let reg of row.content.registro_general">{{reg}} <br/></span>
          </div>
        </div>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="fixedColumn6" class="container">
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 7;">
        <div class="container" style="flex-direction: column;">
          <div class="celdas" style="height: 3.75vh; min-height: 40.55px;">Recordatorios / Alertas x incumplimiento / Reportes a semáforo</div>
          <div class="celdas" style="flex-direction: row; display: flex; width: 100%;">
            <div class="celdas" style="flex: 1;">Prioridad</div>
            <div class="celdas" style="flex: 4;">Recordatorios previos al cumplimiento</div>
            <div class="celdas" style="flex: 2;">Alertas posteriores</div>
          </div>
          <div class="celdas" style="flex-direction: row; display: flex; width: 100%;">
            <div class="celdas" style="flex: 1;">Nivel</div>
            <div class="celdas" style="flex: 1;">Recordatorio 1</div>
            <div class="celdas" style="flex: 1;">Recordatorio 2</div>
            <div class="celdas" style="flex: 1;">Recordatorio 3</div>
            <div class="celdas" style="flex: 1;">Recordatorio 4</div>
            <div class="celdas" style="flex: 1;">Por incumplimiento</div>
            <div class="celdas" style="flex: 1;">Reporte en 1 día vía semáforo</div>
          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 7;">
        <div class="container" style="flex-direction: row;">
          <div class="celdas internas" style="flex: 1;">{{row.content.nivel}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.recordatorios[0]?.mensaje}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.recordatorios[1]?.mensaje}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.recordatorios[2]?.mensaje}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.recordatorios[4]?.mensaje}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.alertas[0]?.mensaje}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.reporte_via_semaforo[0]?.mensaje}}</div>
        </div>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="fixedColumn7" class="container">
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 20;">
        <div class="container" style="flex-direction: column;">
          <div class="celdas" style="height: 2.50vh; min-height: 23.5px;">Correlación con otros sectores del escudo fiscal</div>
          <div class="celdas" style="height: 2vh; min-height: 18.8px; display: flex; flex-direction: row;">
            <div class="celdas" style="flex: 5;">Correlación con inicio</div>
            <div class="celdas" style="flex: 2;">... con cumplimiento</div>
            <div class="celdas" style="flex: 9;">... con control / capacitación</div>
            <div class="celdas" style="flex: 2;">... con control</div>
            <div class="celdas" style="flex: 4;">... con precaución</div>
          </div>
          
          <div class="celdas" style="flex-direction: row; display: flex; width: 100%;">
            <div class="celdas" style="flex: 2;">Leyes</div>
            <div class="celdas" style="flex: 1;">Temario</div>        
            <div class="celdas" style="flex: 1;">Búsqueda</div>   
            <div class="celdas" style="flex: 1;">Números</div>      
            <div class="celdas" style="flex: 1;">Impuestos</div>      
            <div class="celdas" style="flex: 1;">Documentación</div>      
           
            <div class="celdas" style="flex: 1;">Caso práctico</div>
            <div class="celdas" style="flex: 1;">Textos</div>
            <div class="celdas" style="flex: 1;">Preguntas frecuentes</div>
            <div class="celdas" style="flex: 1;">Mejores Prácticas</div>
            <div class="celdas" style="flex: 1;">1 Minuto</div>
            <div class="celdas" style="flex: 1;">5 Minuto</div>
            <div class="celdas" style="flex: 1;">15 Minuto</div>
            <div class="celdas" style="flex: 1;">30 Minuto</div>
            <div class="celdas" style="flex: 1;">60 Minuto</div>
    
            <div class="celdas" style="flex: 1;">Dictamen</div>        
            <div class="celdas" style="flex: 1;">Semáforo</div>   

            <div class="celdas" style="flex: 1;">Inconsistencias</div>        
            <div class="celdas" style="flex: 1;">Sanciones genéricas importantes</div>     
            <div class="celdas" style="flex: 1;">Sanción penal "Empresa"</div>
            <div class="celdas" style="flex: 1;">Sanción penal "Persona"</div>

          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 20;">
        <div class="container" style="flex-direction: row;">
          <div class="celdas internas" style="flex: 2; overflow: scroll;">
            <button (click)="openArticleRef(row)" mat-fab color="primary" class="custom-fab">
              <mat-icon style="font-size:22px;">bookmark</mat-icon>
            </button>        
            <br/>
            <a *ngFor="let a of row.content.leyes" (click)="articleClicked(a)" >
              <span *ngIf="!a.parrafos" matTooltip="{{a.nombre_documento}} / {{a.nombre}}">
                {{a.abreviatura}} / Art. {{a.articulo}} <br/>
              </span>
              <div *ngIf="a.parrafos">
                <span *ngFor="let p of a.parrafos" matTooltip="{{a.nombre}} / Párr. {{p.numero}} - {{p.nombre}}"> {{a.abreviatura}} / Art. {{a.articulo}} / Párr. {{p.numero}} <br/></span>

              </div>
            </a>
          </div>  
          <div class="celdas internas" style="flex: 1; overflow: scroll;">
            <button (click)="openTopicsRef(row)"  mat-fab color="primary" class="custom-fab">
              <mat-icon style="font-size:22px;">assignment</mat-icon>
            </button>
            <span *ngFor="let b of row.content.temario">{{b.nombre}}, </span>
          </div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.busqueda}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.numeros}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.impuestos}}</div>  
          <div class="celdas internas" style="flex: 1;">
            <button (click)="openDocumentationsRef(row)"  mat-fab color="primary" class="custom-fab">
              <mat-icon style="font-size:22px;">insert_drive_file</mat-icon>
            </button>
            <p *ngFor="let b of row.content.documentacion">{{b.nombre}}</p>
          </div>  
          <div class="celdas internas" style="flex: 1;">
            <button (click)="openCapacitationsRef(row)" mat-fab color="primary" class="custom-fab">
              <mat-icon style="font-size:22px;">video_library</mat-icon>
            </button>
            {{row.content.caso_practico}}
          
          </div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.textos}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.preguntas_frecuentes}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.mejores_practicas}}</div>  
          <div class="celdas internas" style="flex: 1;">
            <a  *ngFor="link of row.content.un_minuto" href={{link}} >Da clic para ir al video</a>
          </div>  
          <div class="celdas internas" style="flex: 1;">
            <a  *ngFor="link of row.content.cinco_minutos" href={{link}} >Da clic para ir al video</a>
          </div>  
          <div class="celdas internas" style="flex: 1;">
            <a  *ngFor="link of row.content.quince_minutos" href={{link}} >Da clic para ir al video</a>
          </div>  
          <div class="celdas internas" style="flex: 1;">
            <a  *ngFor="link of row.content.treinta_minutos" href={{link}} >Da clic para ir al video</a>
          </div>   
          <div class="celdas internas" style="flex: 1;">
            <a  *ngFor="link of row.content.sesenta_minutos" href={{link}} >Da clic para ir al video</a>
          </div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.dictamen}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.semaforo}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.inconsistencias}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.sanciones_generales}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.empresa}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.persona}}</div>  
        </div>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="fixedColumn8" class="container">
      <!--HEADER-->
      <mat-header-cell *matHeaderCellDef class="fixed-column" style="background-color: #ffcc0c; padding: 0px; flex: 10;">
        <div class="container" style="flex-direction: column;">
          <div class="celdas" style=" min-height: 10.55px;">Interacción con Personas</div>
          <div class="celdas" style="flex-direction: row; display: flex; width: 100%;">
            <div class="celdas" style="flex: 1;">Usuario 1 (responsable)</div>
            <div class="celdas" style="flex: 1;">Usuario 2 (segundo)</div>
            <div class="celdas" style="flex: 1;">Usuario 3 (supervisor)</div>
            <div class="celdas" style="flex: 1;">Usuario 4 (director)</div>
            <div class="celdas" style="flex: 1;">Usuario 5 (GB)</div>
          </div>
          <div class="celdas" style="flex-direction: row; display: flex; width: 100%;">
            <div class="celdas" style="flex: 1;">Tiempo de capacitación que lleva, y qeu con tiempo le hace falta...</div>
            <div class="celdas" style="flex: 1;">... y calificación en Capacitación, Cumplimiento, etc.</div>
            <div class="celdas" style="flex: 1;">Que debe verificar el supervisor, de aquel cumplimiento</div>
            <div class="celdas" style="flex: 1;">Semáforos a enviarle</div>
            <div class="celdas" style="flex: 1;">Indica si la Documentación es suficiente y está razonable</div>
          </div>
        </div>
      </mat-header-cell>
      <!--BODY-->
      <mat-cell *matCellDef="let row" class="fixed-column" style="background-color: #ffffff; height: 40vh ; padding: 0px; margin: 0px; flex: 10;">
        <div class="container" style="flex-direction: row;">
          <div class="celdas internas" style="flex: 1;">{{row.content.usuario1}}</div>  
          <div class="celdas internas" style="flex: 1;">{{row.content.usuario2}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.usuario3}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.usuario4}}</div>
          <div class="celdas internas" style="flex: 1;">{{row.content.usuario5}}</div>
        </div>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="fixedColumns; sticky: true" style="background-color: #ffcc0c;" ></mat-header-row>
    <mat-row class="row-table" style="height: 15vh; min-height: 141px;" *matRowDef="let row; columns: fixedColumns;"></mat-row>
  </mat-table>

</div>

<div style="position: fixed; 
top:130px; left: 390px; 
width: 50%; z-index: 4; 
max-height: 80vh; 
background-color: white; 
padding: 10px; 
box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.5); 
border-radius: 10px; overflow:scroll;" 
*ngIf="isShownComponent">
    <h5>Relacionar con artículos.</h5>
  <app-search-document-and-paragraph
  (sendingArticles)="artReceived($event)" 
  (sendingParagraphs) = "parRecieved($event)"
  (sendingDeleted) = "delArtRecieved($event)"
  (closingPanel)="closePanel($event)" 
  [articlesPrevRelated]="universalrow.content.leyes"></app-search-document-and-paragraph> 
</div>

<div style="position: fixed; top:230px; left: 390px; width: 50%; z-index: 4;">
  <div style="background-color: white; padding: 10px; box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.5); border-radius: 10px;" *ngIf="isShownTopics">
    <h5>Relacionar con temas.</h5>
    <app-search-topic (sendingTopics)="topicReceived($event)" (closingPanel)="closePanel($event)"></app-search-topic>
  </div>
</div>

<div style="position: fixed; top:130px; left: 390px; width: 50%; z-index: 4;">
  <div style="max-height: 70vh; overflow: scroll; background-color: white; padding: 10px; box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.5); border-radius: 10px;" *ngIf="isShownDocumentation">
    <h5>Relacionar con documentaciones.</h5>
    <app-search-documentation (closingPanel)="closePanel($event)" (sendingDocumentations)="onDataReceived($event)"></app-search-documentation>
    <button mat-raised-button color="primary" style="margin: 22px;" (click)="documentationReceived()">Relacionar</button>&nbsp;
    <button mat-raised-button color="secondary" (click)="closeDocumentation()">Cancelar</button>
  </div>
</div>

<div style="position: fixed; top:130px; left: 390px; width: 50%; z-index: 4;">
  <div style="max-height: 70vh; overflow: scroll; background-color: white; padding: 10px; box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.5); border-radius: 10px;" *ngIf="isShownCapacitations">
    <h5>Relacionar con capacitaciones.</h5>
    <app-search-capacitations (closingPanel)="closePanel($event)" (sendingCapacitations)="onCapacitationsReceived($event)"></app-search-capacitations>
    <button mat-raised-button color="primary" style="margin: 22px;" (click)="capacitationsRecieved()">Relacionar</button>&nbsp;
    <button mat-raised-button color="secondary" (click)="closeCapacitations()">Cancelar</button>
  </div>
</div>
